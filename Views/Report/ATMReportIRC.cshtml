@model AgentDesktop.Models.ReportIRCFilter

@{
	ViewData["Title"] = "ATM Ops - Management Report";
}

<style>
	.dataTables_scroll {
		overflow: auto;
	}

	th, td {
		white-space: nowrap;
	}
</style>

<h2 class="content-heading text-black">Filter Report - ATM Operations</h2>

<form asp-controller="Report" asp-action="ATMReportIRC" method="post">
	<div class="row items-push">
		<div class="col-lg-3">
			<p class="text-muted">
				Please fill necessary field for filteration.
			</p>

		</div>


		<div class="col-lg-7 offset-lg-1">
			<div class="form-group">
				<label for="re-listing-name">Date Filter</label>
				<div class="input-daterange input-group" data-date-format="dd-M-yyyy" data-week-start="1" data-autoclose="true" data-today-highlight="true">
					<input type="text" class="form-control" asp-for="Date1" placeholder="Start Date" data-week-start="1" data-autoclose="true" data-today-highlight="true" autocomplete="off">
					<div class="input-group-prepend input-group-append">
						<span class="input-group-text font-w600">to</span>
					</div>
					<input type="text" class="form-control" asp-for="Date2" placeholder="End Date" data-week-start="1" data-autoclose="true" data-today-highlight="true" autocomplete="off">
				</div>

			</div>

			<div class="form-group row">
				<div class="col-md-8">
					<label for="ReportType">Report Type</label>
					<select class="form-control form-control" asp-for="ReportType">
						<option value="0">Select report type</option>
						<option value="I">Inquiries</option>
						<option value="R">Requests</option>
						<option value="C">Complaints</option>
					</select>
					<span asp-validation-for="ReportType" class="text-danger"></span>
				</div>
			</div>


			<div class="form-group">
				<button type="submit" class="btn btn-alt-primary">Show Report</button>
			</div>

		</div>

	</div>
</form>

<div class="block">
	<div class="block-header block-header-default bg-gray-light">
		<h3 class="block-title text-uppercase">SUMMARY REPORT BY REASON CODES (INQUIRY/REQUEST/COMPLAINT)</h3>

		<div class="block-options">
			<input type="text" id="myInput" hidden>
			<a id="btn" href="#" class="btn btn-sm btn-circle btn-outline-danger mr-5 mb-5" data-placement="top" data-toggle="tooltip" title="Export to Excel">
				<i class="fa fa-file-excel-o"></i>
			</a>
		</div>
	</div>

	<div class="block-content block-content-full">
		<div class="dataTables_scroll">
			<table id="ListIRC" class="table table-bordered table-striped table-vcenter js-service-dataTable">
				<thead>
					<tr>
						<th class="d-none d-sm-table-cell">DESCRIPTION</th>
						<th class="d-none d-sm-table-cell">REASON CODE</th>
						<th class="d-none d-sm-table-cell">COUNT</th>
						<th class="d-none d-sm-table-cell">COMPLEX</th>
						<th class="d-none d-sm-table-cell">SIMPLE</th>
						<th class="d-none d-sm-table-cell">RESOLVED</th>
						<th class="d-none d-sm-table-cell">OPEN</th>
						<th class="d-none d-sm-table-cell">Cancelled</th>
						<th class="d-none d-sm-table-cell">Closed</th>
						<th class="d-none d-sm-table-cell">Commitment</th>
						<th class="d-none d-sm-table-cell">Endorse</th>
						<th class="d-none d-sm-table-cell">Resolved</th>

					</tr>
				</thead>

				<tbody>
					@foreach (var usr in ViewBag.ListReportIRC)
					{
						<tr>
							<td class="d-none d-sm-table-cell">@usr.reason</td>
							<td class="d-none d-sm-table-cell">@usr.reasoncode</td>
							<td class="d-none d-sm-table-cell text-danger">@usr.cnt</td>
							<td class="d-none d-sm-table-cell">@usr.complex</td>
							<td class="d-none d-sm-table-cell">@usr.simple</td>
							<td class="d-none d-sm-table-cell">@usr.resolved</td>
							<td class="d-none d-sm-table-cell">@usr.open</td>
							<td class="d-none d-sm-table-cell text-primary">@usr.cancelled</td>
							<td class="d-none d-sm-table-cell text-primary">@usr.closed</td>
							<td class="d-none d-sm-table-cell text-primary">@usr.commitment</td>
							<td class="d-none d-sm-table-cell text-primary">@usr.endorsed</td>
							<td class="d-none d-sm-table-cell text-primary">@usr.resolved2</td>

						</tr>
					}
				</tbody>






			</table>
		</div>


		<!-- END Orders Table -->

	</div>
</div>

@section Scripts {

	<script>
		$(document).ready(function () {
			$('#Date1').datepicker({ autoclose: true });

			$('#Date2').datepicker({ autoclose: true });
		});

		$('#ListIRC').on('search.dt', function () {
			var value = $('.dataTables_filter input').val();
			document.getElementById("myInput").value = value; // <-- the value
		});

		$(function () {
			$('#btn').click(function (evt) {
				$.ajax({
					type: 'GET',
					url:'@Url.Action("GetSearch", "Admin")',
					cache: false,
					data: { myInput: $("#myInput").val() },
					success: function (data) {
						if (data.success) {
							window.location = "/Report/ExportIRCATM/";
						}
					}
				});
			});
		});

	</script>
}
